syntax = "proto3";

package heap_tracker;

message Update {
  message HeapOperation {
    enum Type {
        ALLOC = 0;
        DEALLOC = 1;
    }

    Type type = 1;
    int64 micros_since_server_start = 2;
    int64 address = 3;
    optional int64 size = 4;
  }

  message Marker {
    int64 first_operation_seq_no = 1;
    string name = 2;
  }

  repeated HeapOperation heap_operation = 1;
  repeated Marker marker = 2;
  bool end_of_file = 3;
}