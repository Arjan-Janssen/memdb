syntax = "proto3";

package protos;

message HeapOperations {
    message Marker {
      int64 last_operation_sequence_number = 1;
      string name = 2;
    }

    message HeapOperation {
        enum Type {
            TYPE_ALLOC = 0;
            TYPE_FREE = 1;
        }

        Type type = 1;
        int64 micros_since_server_start = 2;
        int64 address = 3;
        optional int64 size = 4;
    }

    repeated HeapOperation heap_operation = 1;
    repeated Marker marker = 2;
    bool end_of_file = 3;
}